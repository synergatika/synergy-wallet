<div class="transaction">
	<h1 class="heading">Your Recent Transactions</h1>

	<div *ngIf="access !== 'merchant'">
		<div>
			<div class="table container">	
				<ng-container *ngFor="let item of transactions | paginate: { id: 'tr_paginator', itemsPerPage: 10, currentPage: p }">
					<ng-container [ngTemplateOutlet]="itemTemplate" [ngTemplateOutletContext]="{item: item}"></ng-container>
				</ng-container>		
			</div>
			<div class="pagination-wrapper">
				<pagination-controls autoHide="true" id='tr_paginator' (pageChange)="p=$event"></pagination-controls>
			</div>
		</div>
		
		<ng-template #itemTemplate let-item="item">
			<div class="transaction-receipt row">			
				<div class="transaction-desc col"><span class="title">Receipt:</span> {{item.tx}}</div>
			</div>
			<div class="transaction-details row">
				<div class="transaction-info col">
					<span class="transaction-title">{{item.createdAt | date:'medium' }}</span>
				</div>
				<div class="transaction-info col">
					<span class="transaction-title"><span class="title">Store:</span> {{item.info.from_name}}</span>
				</div>
				<div class="transaction-number col"
					[ngClass]="(item.type==='EarnPoints') ? 'font-success' : 'font-danger'">
					{{ (item.type==='EarnPoints') ? '+' : '-' }}
					{{item.info.points}} points
				</div>
			</div>
		</ng-template>		
	</div>

	<div *ngIf="access === 'merchant'">
		<div>
			<ng-container *ngFor="let item of transactions">
				<ng-container [ngTemplateOutlet]="itemTemplate" [ngTemplateOutletContext]="{item: item}"></ng-container>
			</ng-container>
		</div>

		<ng-template #itemTemplate let-item="item">
			<div class="transaction-item">
				<div class="transaction-info">
					<h3 class="transaction-title">Customer: {{item.info.to_email}}</h3>
					<span class="transaction-desc">Receipt: {{item.tx}} <br> {{item.createdAt | date:'medium' }}</span>
				</div>

				<span class="transaction-number" [ngClass]="(item.type==='EarnPoints') ? 'font-info' : 'font-focus'">
					<!--{{ (item.type==='EarnPoints') ? '-' : '+' }}-->
					{{item.info.points}} points
				</span>
			</div>
		</ng-template>
	</div>
</div>